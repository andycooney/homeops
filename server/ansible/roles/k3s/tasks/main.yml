---

- include: kubeconfig.yml
  tags:
  - kubeconfig

- include: kube-vip.yml
  when:
  - k3s_control_node is defined
  - k3s_control_node
  - kube_vip.enabled is defined
  - kube_vip.enabled
  tags:
  - kube-vip

- include: calico.yml
  when:
  - k3s_control_node is defined
  - k3s_control_node
  - calico.enabled is defined
  - calico.enabled
  tags:
  - calico

- include: etcd-secret.yml
  when:
  - k3s_control_node is defined
  - k3s_control_node
  - k3s_etcd_datastore is defined
  - k3s_etcd_datastore
  tags:
  - etcd-secret
