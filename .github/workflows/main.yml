name: main

on:
  push:
    tags-ignore:
      - flux-*

jobs:
  main:
    runs-on:
      - self-hosted
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Lint Ansible
        uses: ansible/ansible-lint-action@master
        with:
          targets: ./ansible
      - name: Validate Helm Releases
        uses: stefanprodan/hrval-action@v3.3.1
        with:
          helmRelease: deployments/
          kubernetesVersion: 1.18.6
          ignoreValues: false
