---

dependency:
  name: galaxy
driver:
  name: docker
# lint: |
#   set -e
#   # yamllint -s .
#   ansible-lint --exclude molecule/
platforms:
- name: k8s-control-node
  groups:
  - control-nodes
  image: "geerlingguy/docker-${MOLECULE_DISTRO:-ubuntu2004}-ansible:latest"
  command: ${MOLECULE_DOCKER_COMMAND:-""}
  volumes:
  - /sys/fs/cgroup:/sys/fs/cgroup:ro
  privileged: true
  pre_build_image: ${MOLECULE_PREBUILT:-true}
  networks:
  - name: k3snet
- name: k8s-generic-node-a
  groups:
  - generic-nodes
  image: "geerlingguy/docker-${MOLECULE_DISTRO:-ubuntu2004}-ansible:latest"
  command: ${MOLECULE_DOCKER_COMMAND:-""}
  volumes:
  - /sys/fs/cgroup:/sys/fs/cgroup:ro
  privileged: true
  pre_build_image: ${MOLECULE_PREBUILT:-true}
  networks:
  - name: k3snet
- name: k8s-generic-node-b
  groups:
  - generic-nodes
  image: "geerlingguy/docker-${MOLECULE_DISTRO:-ubuntu2004}-ansible:latest"
  command: ${MOLECULE_DOCKER_COMMAND:-""}
  volumes:
  - /sys/fs/cgroup:/sys/fs/cgroup:ro
  privileged: true
  pre_build_image: ${MOLECULE_PREBUILT:-true}
  networks:
  - name: k3snet
provisioner:
  name: ansible
  env:
    ANSIBLE_CONFIG: ../../ansible.cfg
    ANSIBLE_ROLES_PATH: ../../roles
  # inventory:
  #   links:
  #     group_vars: ../../inventory/group_vars
  #     host_vars: ../../inventory/host_vars
  options:
    verbose: true
verifier:
  name: ansible
