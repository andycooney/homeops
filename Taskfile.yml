version: '2'

tasks:
  # Generate and apply secrets
  secrets:
    cmds:
      - ./secrets/helm-secrets.sh
      - ./secrets/k8s-secrets.sh
      - ./secrets/sample-env.sh
    silent: true
  # Force flux to update
  sync:
    cmds:
      - fluxctl --k8s-fwd-ns=flux sync